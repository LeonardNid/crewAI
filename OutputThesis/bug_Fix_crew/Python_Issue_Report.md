# Python Issue Report

| #  | File & location                    | Failing request              | Root cause                                                                                                               | Suggested fix                                                                                                                  |
|-----|----------------------------------|------------------------------|--------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------|
| 1   | models.py, ReminderPeriod and Deadline classes (relationship fields) | All API requests (POST /users, POST /theses, GET /theses, GET /users/1/reminder_periods, PUT/DELETE on reminder_period or deadline routes) | Missing foreign key column in ReminderPeriod referencing Deadline table, causing SQLAlchemy to fail mapper initialization due to ambiguous join condition on ReminderPeriod.deadline relationship. Relationship between ReminderPeriod and Deadline lacks a proper foreign key or primaryjoin clause, leading to sqlalchemy.exc.InvalidRequestError on mapper init. | Add a foreign key column in ReminderPeriod for Deadline, for example:<br> - Add `deadline_id = db.Column(db.Integer, db.ForeignKey('deadlines.id'), nullable=True)`<br> - Ensure the ReminderPeriod.deadline relationship references this foreign key.<br> For example:<br>```python<br>deadline_id = db.Column(db.Integer, db.ForeignKey('deadlines.id'), nullable=True)<br>deadline = db.relationship('Deadline', back_populates='reminderperiods', lazy=True)<br>```<br> - Adjust database schema accordingly with migration or recreate.<br> - This fixes mapper initialization by enabling SQLAlchemy to resolve join condition automatically. |

This is the single root cause causing ALL failures because all requests access or cause mapper initialization of ReminderPeriod or Deadline models. Fixing this will resolve the SQLAlchemy error and ensure proper relationship mapping.